<!DOCTYPE html>
<html>
  <head>
    <title>AR Touch Rotate</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <!-- A-Frame scene with AR.js integration -->
    <a-scene embedded arjs>
      <!-- AR Marker to place the object -->
      <a-marker preset="kanji">
        <!-- 3D object to rotate -->
        <a-box id="rotate-box" position="0 0.5 0" color="#4CC3D9" depth="1" height="1" width="1"></a-box>
      </a-marker>

      <!-- Camera with AR support -->
      <a-camera></a-camera>
    </a-scene>

    <script>
      const box = document.getElementById('rotate-box');
      let lastTouch = null;

      // Function to handle touch movement
      function onTouchMove(event) {
        event.preventDefault();
        if (lastTouch) {
          const deltaX = event.touches[0].clientX - lastTouch.clientX;
          const deltaY = event.touches[0].clientY - lastTouch.clientY;
          
          // Rotate the object based on touch movement
          let rotation = box.getAttribute('rotation');
          rotation.y += deltaX * 0.1; // Adjust sensitivity
          rotation.x -= deltaY * 0.1; // Adjust sensitivity
          box.setAttribute('rotation', rotation);
        }

        lastTouch = event.touches[0];
      }

      // Function to handle the start of touch (initial touch)
      function onTouchStart(event) {
        lastTouch = event.touches[0];
      }

      // Function to handle the end of touch
      function onTouchEnd() {
        lastTouch = null;
      }

      // Add event listeners for touch events
      box.addEventListener('touchstart', onTouchStart);
      box.addEventListener('touchmove', onTouchMove);
      box.addEventListener('touchend', onTouchEnd);
    </script>
  </body>
</html>
