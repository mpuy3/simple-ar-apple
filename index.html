<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AR Cube on Kanji Marker</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene embedded arjs>
      <!-- Define the AR.js Marker -->
      <a-marker preset="kanji">
        <!-- Create the cube that will appear on top of the marker -->
        <a-box
          id="cube"
          position="0 0.5 0"
          rotation="0 0 0"
          color="#4CC3D9"
          scale="1 1 1"
        ></a-box>
      </a-marker>

      <!-- Camera setup for AR -->
      <a-camera></a-camera>
    </a-scene>

    <script>
      // Get the cube element
      let cube = document.querySelector("#cube");
      let startTouch = 0;

      window.addEventListener("touchstart", (e) => {
        startTouch = e.touches[0].clientX;
      });

      window.addEventListener("touchmove", (e) => {
        if (e.touches.length == 1) {
          let deltaX = e.touches[0].clientX - startTouch;
          let rotation = cube.getAttribute("rotation");

          // Rotate the cube only along the Y-axis
          rotation.y += deltaX * 0.1;

          // Set the rotation back to the cube while keeping its position on the marker
          cube.setAttribute("rotation", rotation);

          // Update the start touch position for continuous rotation
          startTouch = e.touches[0].clientX;
        }
      });
    </script>
  </body>
</html>
